<html>
    <head>
        <title>CJO page tracking example</title>
        <script src="https://mktdplp102cdn.azureedge.net/public/latest/js/form-loader.js?v=1.69.1065.0"></script> <div class="d365-mkt-config" style="display:none" data-website-id="h15PkP61TpLcz8uoI7F82jboEKLrJ-jfokwjhAIYgnY" data-hostname="e12d4abc124944e08c6c005cbe09267c.svc.dynamics.com"> </div>
        <script>
          (function (a, t, i) { var e = "MSEI"; var s = "Analytics"; var o = e + "queue"; a[o] = a[o] || []; var r = a[e] || function (n) { var t = {}; t[s] = {}; function e(e) { while (e.length) { var r = e.pop(); t[s][r] = function (e) { return function () { a[o].push([e, n, arguments]) } }(r) } } var r = "track"; var i = "set"; e([r + "Event", r + "View", r + "Action", i + "Property", i + "User", "initialize", "teardown"]); return t }(i.name); var n = i.name; if (!a[e]) { a[n] = r[s]; a[o].push(["new", n]); setTimeout(function () { var e = "script"; var r = t.createElement(e); r.async = 1; r.src = i.src; var n = t.getElementsByTagName(e)[0]; n.parentNode.insertBefore(r, n) }, 1) } else { a[n] = new r[s] } if (i.user) { a[n].setUser(i.user) } if (i.props) { for (var c in i.props) { a[n].setProperty(c, i.props[c]) } } a[n].initialize(i.cfg) })(window, document, {
               src: "https://download.pi.dynamics.com/sdk/web/msei-0.js",
               name: "msdynmkt",
               cfg: {
                   ingestionKey:"6204aad2a50d4073b08b99b0aba2f5b3-2e04fe68-9d9a-403b-a70c-cad3834056a0-7432"
               }
           });
       </script>
    </head>
    <body onLoad='handleView("lmpage")'>
        <h1>CJO page tracking example</h1>
        <p>Loading this page will trigger the 'lmpageview' event on CJO with the content of the 'user' query parameter as the user ID and 'lmpage' as a 'link' parameter to the event.<p>
     <script>
       function handleView(param) {
            var urlParams = new URLSearchParams(window.location.search);
            var user = urlParams.get('user')

            window["msdynmkt"].setUser({ authId: user});
            window["msdynmkt"].trackEvent({
                name: "msdynmkt_lmpageview",
                version: "1.0.0",
                properties: {
                "link": param
            }});
       }
     </script>     
    </body>
</html>